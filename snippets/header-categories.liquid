{% comment %}
  Renders the Categories button and dropdown menu.
  Accepts:
  - section: {Object} The section object.
{% endcomment %}

<div class="header-categories">
  <button class="header-categories__button button button--primary">
    {{ section.settings.categories_button_text }}
    <span class="icon-caret">
      <svg aria-hidden="true" focusable="false" role="presentation" class="icon icon-caret" viewBox="0 0 10 6">
        <path fill-rule="evenodd" clip-rule="evenodd" d="M9.354.646a.5.5 0 00-.708 0L5 4.293 1.354.646a.5.5 0 00-.708.708l4 4a.5.5 0 00.708 0l4-4a.5.5 0 000-.708z" fill="currentColor">
      </svg>
    </span>
  </button>
  <div class="header-categories__dropdown">
    <div class="header-categories__grid">
      {% for block in section.blocks %}
        {% if block.type == 'category_menu' %}
          <div class="header-categories__column">
            {% if block.settings.heading != blank %}
              <a href="{{ block.settings.link | default: '#' }}" class="header-categories__heading h5">
                {{ block.settings.heading }}
              </a>
            {% endif %}
            {% if block.settings.menu != blank %}
              <ul class="header-categories__list list-unstyled">
                {% for link in block.settings.menu.links %}
                  <li>
                    <a href="{{ link.url }}" class="header-categories__link link link--text">
                      {{ link.title }}
                    </a>
                  </li>
                {% endfor %}
              </ul>
            {% endif %}
          </div>
        {% endif %}
      {% endfor %}
    </div>
  </div>
</div>

<style>
  .header-categories {
    position: relative;
    display: inline-block;
  }

  .header-categories__button {
    display: flex;
    align-items: center;
    gap: 8px;
    background-color: #2563eb; /* Blue color from screenshot */
    color: white;
    border: none;
    padding: 10px 20px;
    border-radius: 20px; /* Rounded button */
    font-weight: 600;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }

  .header-categories__button:hover {
    background-color: #1d4ed8;
  }

  .header-categories__button .icon-caret {
    width: 10px;
    height: 10px;
  }

  .header-categories__dropdown {
    position: absolute;
    top: 100%;
    left: 0;
    width: max-content;
    min-width: 600px;
    background-color: white;
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
    border-radius: 8px;
    padding: 24px;
    opacity: 0;
    visibility: hidden;
    transform: translateY(10px);
    transition: all 0.3s ease;
    z-index: 100;
    margin-top: 10px;
  }

  .header-categories:hover .header-categories__dropdown {
    opacity: 1;
    visibility: visible;
    transform: translateY(0);
  }

  .header-categories__grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr); /* 3 columns by default */
    gap: 24px;
  }

  .header-categories__column {
    display: flex;
    flex-direction: column;
    gap: 12px;
  }

  .header-categories__heading {
    font-weight: 700;
    color: #1e293b;
    text-decoration: none;
    margin-bottom: 8px;
    display: block;
  }

  .header-categories__list {
    display: flex;
    flex-direction: column;
    gap: 8px;
    margin: 0;
    padding: 0;
  }

  .header-categories__link {
    color: #64748b;
    text-decoration: none;
    font-size: 0.95rem;
    transition: color 0.2s ease;
  }

  .header-categories__link:hover {
    color: #2563eb;
  }
</style>
