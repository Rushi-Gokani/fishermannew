{% doc %}
  @prompt
    You are a senior Shopify theme developer.
    Create a custom Shopify section that exactly matches the attached reference screenshot titled “Shop by Categories”.
    
    Functional Requirements:
    
    The section title should be “Shop by Categories” on the left
    
    A “See All >” link should appear on the right (configurable URL)
    
    Below the title, display a horizontal row of category cards
    
    Each card contains:
    
    An image (square, uniform size)
    
    A category title below the image (text link)
    
    Cards should be horizontally scrollable on mobile
    
    On desktop, cards should appear in one row without vertical stacking
    
    Design Requirements:
    
    Clean, minimal, modern layout (similar to Shopify Dawn style)
    
    Images should have:
    
    Slight border radius
    
    object-fit: cover
    
    Equal spacing between cards
    
    Text aligned center under each image
    
    Hover effect on desktop (slight zoom or opacity)
    
    “Sale” category text should be red
    
    Shopify Section Requirements:
    
    Use schema settings to allow:
    
    Section heading text
    
    “See All” link URL
    
    Repeating blocks for categories
    
    Each block should allow:
    
    Image picker
    
    Category title
    
    Category link
    
    Optional toggle to mark item as “Sale”
    
    Must be fully dynamic using Liquid
    
    Use pure CSS (no JS unless required)
    
    Mobile responsive
    
    Code Output Requirements:
    
    Provide complete section code:
    
    HTML (Liquid)
    
    CSS inside {% style %} tags
    
    JSON schema included
    
    Code should be copy-paste ready for Shopify
    
    Follow best practices for performance and accessibility
    
    Recreate the layout and spacing as close as possible to the reference screenshot.
{% enddoc %}
```liquid
{% assign ai_gen_id = block.id | replace: '_', '' | downcase %}

{% style %}
  .ai-shop-categories-{{ ai_gen_id }} {
    display: block;
    width: 100%;
    padding: {{ block.settings.section_padding_top }}px 0 {{ block.settings.section_padding_bottom }}px;
  }

  .ai-shop-categories-header-{{ ai_gen_id }} {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: {{ block.settings.header_spacing }}px;
    padding: 0 20px;
  }

  .ai-shop-categories-title-{{ ai_gen_id }} {
    font-size: {{ block.settings.title_size }}px;
    font-weight: 700;
    margin: 0;
    color: {{ block.settings.title_color }};
  }

  .ai-shop-categories-see-all-{{ ai_gen_id }} {
    font-size: {{ block.settings.see_all_size }}px;
    color: {{ block.settings.see_all_color }};
    text-decoration: none;
    display: flex;
    align-items: center;
    gap: 4px;
    transition: opacity 0.3s ease;
  }

  .ai-shop-categories-see-all-{{ ai_gen_id }}:hover {
    opacity: 0.7;
  }

  .ai-shop-categories-container-{{ ai_gen_id }} {
    overflow-x: auto;
    overflow-y: hidden;
    -webkit-overflow-scrolling: touch;
    scrollbar-width: none;
    -ms-overflow-style: none;
  }

  .ai-shop-categories-container-{{ ai_gen_id }}::-webkit-scrollbar {
    display: none;
  }

  .ai-shop-categories-grid-{{ ai_gen_id }} {
    display: flex;
    gap: {{ block.settings.card_spacing }}px;
    padding: 0 20px;
    min-width: min-content;
  }

  .ai-shop-category-card-{{ ai_gen_id }} {
    flex: 0 0 auto;
    width: {{ block.settings.card_width }}px;
    text-align: center;
  }

  .ai-shop-category-image-wrapper-{{ ai_gen_id }} {
    position: relative;
    width: 100%;
    aspect-ratio: 1;
    margin-bottom: {{ block.settings.image_text_spacing }}px;
    overflow: hidden;
    border-radius: {{ block.settings.image_border_radius }}px;
    background-color: #f5f5f5;
  }

  .ai-shop-category-image-wrapper-{{ ai_gen_id }} img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.3s ease;
  }

  .ai-shop-category-image-wrapper-{{ ai_gen_id }}:hover img {
    transform: scale(1.05);
  }

  .ai-shop-category-image-placeholder-{{ ai_gen_id }} {
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: #f5f5f5;
  }

  .ai-shop-category-image-placeholder-{{ ai_gen_id }} svg {
    width: 50%;
    height: 50%;
    opacity: 0.3;
  }

  .ai-shop-category-title-{{ ai_gen_id }} {
    font-size: {{ block.settings.category_title_size }}px;
    color: {{ block.settings.category_title_color }};
    text-decoration: none;
    display: block;
    transition: opacity 0.3s ease;
  }

  .ai-shop-category-title-{{ ai_gen_id }}:hover {
    opacity: 0.7;
  }

  .ai-shop-category-title-sale-{{ ai_gen_id }} {
    color: {{ block.settings.sale_text_color }};
  }

  @media screen and (max-width: 749px) {
    .ai-shop-categories-title-{{ ai_gen_id }} {
      font-size: {{ block.settings.title_size | times: 0.8 }}px;
    }

    .ai-shop-category-card-{{ ai_gen_id }} {
      width: {{ block.settings.card_width_mobile }}px;
    }
  }
{% endstyle %}

<div class="ai-shop-categories-{{ ai_gen_id }}" {{ block.shopify_attributes }}>
  <div class="ai-shop-categories-header-{{ ai_gen_id }}">
    {% if block.settings.section_title != blank %}
      <h2 class="ai-shop-categories-title-{{ ai_gen_id }}">{{ block.settings.section_title }}</h2>
    {% endif %}
    {% if block.settings.see_all_link != blank %}
      <a href="{{ block.settings.see_all_link }}" class="ai-shop-categories-see-all-{{ ai_gen_id }}">
        {{ block.settings.see_all_text }}
        <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M6 12L10 8L6 4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </a>
    {% endif %}
  </div>

  <div class="ai-shop-categories-container-{{ ai_gen_id }}">
    <div class="ai-shop-categories-grid-{{ ai_gen_id }}">
      {% assign category_1_title = block.settings.category_1_title %}
      {% assign category_1_image = block.settings.category_1_image %}
      {% assign category_1_link = block.settings.category_1_link %}
      {% assign category_1_is_sale = block.settings.category_1_is_sale %}

      {% if category_1_title != blank %}
        <div class="ai-shop-category-card-{{ ai_gen_id }}">
          <div class="ai-shop-category-image-wrapper-{{ ai_gen_id }}">
            {% if category_1_image != blank %}
              <img
                src="{{ category_1_image | image_url: width: 400 }}"
                alt="{{ category_1_title | escape }}"
                loading="lazy"
                width="400"
                height="400"
              >
            {% else %}
              <div class="ai-shop-category-image-placeholder-{{ ai_gen_id }}">
                {{ 'collection-1' | placeholder_svg_tag }}
              </div>
            {% endif %}
          </div>
          <a
            href="{{ category_1_link }}"
            class="ai-shop-category-title-{{ ai_gen_id }} {% if category_1_is_sale %}ai-shop-category-title-sale-{{ ai_gen_id }}{% endif %}"
          >
            {{ category_1_title }}
          </a>
        </div>
      {% endif %}

      {% assign category_2_title = block.settings.category_2_title %}
      {% assign category_2_image = block.settings.category_2_image %}
      {% assign category_2_link = block.settings.category_2_link %}
      {% assign category_2_is_sale = block.settings.category_2_is_sale %}

      {% if category_2_title != blank %}
        <div class="ai-shop-category-card-{{ ai_gen_id }}">
          <div class="ai-shop-category-image-wrapper-{{ ai_gen_id }}">
            {% if category_2_image != blank %}
              <img
                src="{{ category_2_image | image_url: width: 400 }}"
                alt="{{ category_2_title | escape }}"
                loading="lazy"
                width="400"
                height="400"
              >
            {% else %}
              <div class="ai-shop-category-image-placeholder-{{ ai_gen_id }}">
                {{ 'collection-1' | placeholder_svg_tag }}
              </div>
            {% endif %}
          </div>
          <a
            href="{{ category_2_link }}"
            class="ai-shop-category-title-{{ ai_gen_id }} {% if category_2_is_sale %}ai-shop-category-title-sale-{{ ai_gen_id }}{% endif %}"
          >
            {{ category_2_title }}
          </a>
        </div>
      {% endif %}

      {% assign category_3_title = block.settings.category_3_title %}
      {% assign category_3_image = block.settings.category_3_image %}
      {% assign category_3_link = block.settings.category_3_link %}
      {% assign category_3_is_sale = block.settings.category_3_is_sale %}

      {% if category_3_title != blank %}
        <div class="ai-shop-category-card-{{ ai_gen_id }}">
          <div class="ai-shop-category-image-wrapper-{{ ai_gen_id }}">
            {% if category_3_image != blank %}
              <img
                src="{{ category_3_image | image_url: width: 400 }}"
                alt="{{ category_3_title | escape }}"
                loading="lazy"
                width="400"
                height="400"
              >
            {% else %}
              <div class="ai-shop-category-image-placeholder-{{ ai_gen_id }}">
                {{ 'collection-1' | placeholder_svg_tag }}
              </div>
            {% endif %}
          </div>
          <a
            href="{{ category_3_link }}"
            class="ai-shop-category-title-{{ ai_gen_id }} {% if category_3_is_sale %}ai-shop-category-title-sale-{{ ai_gen_id }}{% endif %}"
          >
            {{ category_3_title }}
          </a>
        </div>
      {% endif %}

      {% assign category_4_title = block.settings.category_4_title %}
      {% assign category_4_image = block.settings.category_4_image %}
      {% assign category_4_link = block.settings.category_4_link %}
      {% assign category_4_is_sale = block.settings.category_4_is_sale %}

      {% if category_4_title != blank %}
        <div class="ai-shop-category-card-{{ ai_gen_id }}">
          <div class="ai-shop-category-image-wrapper-{{ ai_gen_id }}">
            {% if category_4_image != blank %}
              <img
                src="{{ category_4_image | image_url: width: 400 }}"
                alt="{{ category_4_title | escape }}"
                loading="lazy"
                width="400"
                height="400"
              >
            {% else %}
              <div class="ai-shop-category-image-placeholder-{{ ai_gen_id }}">
                {{ 'collection-1' | placeholder_svg_tag }}
              </div>
            {% endif %}
          </div>
          <a
            href="{{ category_4_link }}"
            class="ai-shop-category-title-{{ ai_gen_id }} {% if category_4_is_sale %}ai-shop-category-title-sale-{{ ai_gen_id }}{% endif %}"
          >
            {{ category_4_title }}
          </a>
        </div>
      {% endif %}

      {% assign category_5_title = block.settings.category_5_title %}
      {% assign category_5_image = block.settings.category_5_image %}
      {% assign category_5_link = block.settings.category_5_link %}
      {% assign category_5_is_sale = block.settings.category_5_is_sale %}

      {% if category_5_title != blank %}
        <div class="ai-shop-category-card-{{ ai_gen_id }}">
          <div class="ai-shop-category-image-wrapper-{{ ai_gen_id }}">
            {% if category_5_image != blank %}
              <img
                src="{{ category_5_image | image_url: width: 400 }}"
                alt="{{ category_5_title | escape }}"
                loading="lazy"
                width="400"
                height="400"
              >
            {% else %}
              <div class="ai-shop-category-image-placeholder-{{ ai_gen_id }}">
                {{ 'collection-1' | placeholder_svg_tag }}
              </div>
            {% endif %}
          </div>
          <a
            href="{{ category_5_link }}"
            class="ai-shop-category-title-{{ ai_gen_id }} {% if category_5_is_sale %}ai-shop-category-title-sale-{{ ai_gen_id }}{% endif %}"
          >
            {{ category_5_title }}
          </a>
        </div>
      {% endif %}

      {% assign category_6_title = block.settings.category_6_title %}
      {% assign category_6_image = block.settings.category_6_image %}
      {% assign category_6_link = block.settings.category_6_link %}
      {% assign category_6_is_sale = block.settings.category_6_is_sale %}

      {% if category_6_title != blank %}
        <div class="ai-shop-category-card-{{ ai_gen_id }}">
          <div class="ai-shop-category-image-wrapper-{{ ai_gen_id }}">
            {% if category_6_image != blank %}
              <img
                src="{{ category_6_image | image_url: width: 400 }}"
                alt="{{ category_6_title | escape }}"
                loading="lazy"
                width="400"
                height="400"
              >
            {% else %}
              <div class="ai-shop-category-image-placeholder-{{ ai_gen_id }}">
                {{ 'collection-1' | placeholder_svg_tag }}
              </div>
            {% endif %}
          </div>
          <a
            href="{{ category_6_link }}"
            class="ai-shop-category-title-{{ ai_gen_id }} {% if category_6_is_sale %}ai-shop-category-title-sale-{{ ai_gen_id }}{% endif %}"
          >
            {{ category_6_title }}
          </a>
        </div>
      {% endif %}

      {% assign category_7_title = block.settings.category_7_title %}
      {% assign category_7_image = block.settings.category_7_image %}
      {% assign category_7_link = block.settings.category_7_link %}
      {% assign category_7_is_sale = block.settings.category_7_is_sale %}

      {% if category_7_title != blank %}
        <div class="ai-shop-category-card-{{ ai_gen_id }}">
          <div class="ai-shop-category-image-wrapper-{{ ai_gen_id }}">
            {% if category_7_image != blank %}
              <img
                src="{{ category_7_image | image_url: width: 400 }}"
                alt="{{ category_7_title | escape }}"
                loading="lazy"
                width="400"
                height="400"
              >
            {% else %}
              <div class="ai-shop-category-image-placeholder-{{ ai_gen_id }}">
                {{ 'collection-1' | placeholder_svg_tag }}
              </div>
            {% endif %}
          </div>
          <a
            href="{{ category_7_link }}"
            class="ai-shop-category-title-{{ ai_gen_id }} {% if category_7_is_sale %}ai-shop-category-title-sale-{{ ai_gen_id }}{% endif %}"
          >
            {{ category_7_title }}
          </a>
        </div>
      {% endif %}

      {% assign category_8_title = block.settings.category_8_title %}
      {% assign category_8_image = block.settings.category_8_image %}
      {% assign category_8_link = block.settings.category_8_link %}
      {% assign category_8_is_sale = block.settings.category_8_is_sale %}

      {% if category_8_title != blank %}
        <div class="ai-shop-category-card-{{ ai_gen_id }}">
          <div class="ai-shop-category-image-wrapper-{{ ai_gen_id }}">
            {% if category_8_image != blank %}
              <img
                src="{{ category_8_image | image_url: width: 400 }}"
                alt="{{ category_8_title | escape }}"
                loading="lazy"
                width="400"
                height="400"
              >
            {% else %}
              <div class="ai-shop-category-image-placeholder-{{ ai_gen_id }}">
                {{ 'collection-1' | placeholder_svg_tag }}
              </div>
            {% endif %}
          </div>
          <a
            href="{{ category_8_link }}"
            class="ai-shop-category-title-{{ ai_gen_id }} {% if category_8_is_sale %}ai-shop-category-title-sale-{{ ai_gen_id }}{% endif %}"
          >
            {{ category_8_title }}
          </a>
        </div>
      {% endif %}
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Shop by categories",
  "tag": null,
  "class": "shop-categories-block",
  "settings": [
    {
      "type": "header",
      "content": "Section header"
    },
    {
      "type": "text",
      "id": "section_title",
      "label": "Title",
      "default": "Shop by Categories"
    },
    {
      "type": "range",
      "id": "title_size",
      "label": "Title size",
      "min": 16,
      "max": 48,
      "step": 2,
      "unit": "px",
      "default": 28
    },
    {
      "type": "color",
      "id": "title_color",
      "label": "Title color",
      "default": "#000000"
    },
    {
      "type": "text",
      "id": "see_all_text",
      "label": "See all text",
      "default": "See All"
    },
    {
      "type": "url",
      "id": "see_all_link",
      "label": "See all link"
    },
    {
      "type": "range",
      "id": "see_all_size",
      "label": "See all text size",
      "min": 12,
      "max": 24,
      "step": 1,
      "unit": "px",
      "default": 14
    },
    {
      "type": "color",
      "id": "see_all_color",
      "label": "See all color",
      "default": "#000000"
    },
    {
      "type": "range",
      "id": "header_spacing",
      "label": "Header spacing",
      "min": 10,
      "max": 60,
      "step": 5,
      "unit": "px",
      "default": 30
    },
    {
      "type": "header",
      "content": "Category cards"
    },
    {
      "type": "range",
      "id": "card_width",
      "label": "Card width (desktop)",
      "min": 100,
      "max": 300,
      "step": 10,
      "unit": "px",
      "default": 180
    },
    {
      "type": "range",
      "id": "card_width_mobile",
      "label": "Card width (mobile)",
      "min": 80,
      "max": 200,
      "step": 10,
      "unit": "px",
      "default": 140
    },
    {
      "type": "range",
      "id": "card_spacing",
      "label": "Space between cards",
      "min": 8,
      "max": 40,
      "step": 4,
      "unit": "px",
      "default": 16
    },
    {
      "type": "range",
      "id": "image_border_radius",
      "label": "Image border radius",
      "min": 0,
      "max": 40,
      "step": 2,
      "unit": "px",
      "default": 8
    },
    {
      "type": "range",
      "id": "image_text_spacing",
      "label": "Image to text spacing",
      "min": 4,
      "max": 32,
      "step": 2,
      "unit": "px",
      "default": 12
    },
    {
      "type": "range",
      "id": "category_title_size",
      "label": "Category title size",
      "min": 12,
      "max": 24,
      "step": 1,
      "unit": "px",
      "default": 14
    },
    {
      "type": "color",
      "id": "category_title_color",
      "label": "Category title color",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "sale_text_color",
      "label": "Sale text color",
      "default": "#ff0000"
    },
    {
      "type": "header",
      "content": "Category 1"
    },
    {
      "type": "image_picker",
      "id": "category_1_image",
      "label": "Image"
    },
    {
      "type": "text",
      "id": "category_1_title",
      "label": "Title",
      "default": "Fishing Rods"
    },
    {
      "type": "url",
      "id": "category_1_link",
      "label": "Link"
    },
    {
      "type": "checkbox",
      "id": "category_1_is_sale",
      "label": "Mark as Sale",
      "default": false
    },
    {
      "type": "header",
      "content": "Category 2"
    },
    {
      "type": "image_picker",
      "id": "category_2_image",
      "label": "Image"
    },
    {
      "type": "text",
      "id": "category_2_title",
      "label": "Title",
      "default": "Reels"
    },
    {
      "type": "url",
      "id": "category_2_link",
      "label": "Link"
    },
    {
      "type": "checkbox",
      "id": "category_2_is_sale",
      "label": "Mark as Sale",
      "default": false
    },
    {
      "type": "header",
      "content": "Category 3"
    },
    {
      "type": "image_picker",
      "id": "category_3_image",
      "label": "Image"
    },
    {
      "type": "text",
      "id": "category_3_title",
      "label": "Title",
      "default": "Lures"
    },
    {
      "type": "url",
      "id": "category_3_link",
      "label": "Link"
    },
    {
      "type": "checkbox",
      "id": "category_3_is_sale",
      "label": "Mark as Sale",
      "default": false
    },
    {
      "type": "header",
      "content": "Category 4"
    },
    {
      "type": "image_picker",
      "id": "category_4_image",
      "label": "Image"
    },
    {
      "type": "text",
      "id": "category_4_title",
      "label": "Title",
      "default": "Tackle Boxes"
    },
    {
      "type": "url",
      "id": "category_4_link",
      "label": "Link"
    },
    {
      "type": "checkbox",
      "id": "category_4_is_sale",
      "label": "Mark as Sale",
      "default": false
    },
    {
      "type": "header",
      "content": "Category 5"
    },
    {
      "type": "image_picker",
      "id": "category_5_image",
      "label": "Image"
    },
    {
      "type": "text",
      "id": "category_5_title",
      "label": "Title",
      "default": "Sale"
    },
    {
      "type": "url",
      "id": "category_5_link",
      "label": "Link"
    },
    {
      "type": "checkbox",
      "id": "category_5_is_sale",
      "label": "Mark as Sale",
      "default": true
    },
    {
      "type": "header",
      "content": "Category 6"
    },
    {
      "type": "image_picker",
      "id": "category_6_image",
      "label": "Image"
    },
    {
      "type": "text",
      "id": "category_6_title",
      "label": "Title"
    },
    {
      "type": "url",
      "id": "category_6_link",
      "label": "Link"
    },
    {
      "type": "checkbox",
      "id": "category_6_is_sale",
      "label": "Mark as Sale",
      "default": false
    },
    {
      "type": "header",
      "content": "Category 7"
    },
    {
      "type": "image_picker",
      "id": "category_7_image",
      "label": "Image"
    },
    {
      "type": "text",
      "id": "category_7_title",
      "label": "Title"
    },
    {
      "type": "url",
      "id": "category_7_link",
      "label": "Link"
    },
    {
      "type": "checkbox",
      "id": "category_7_is_sale",
      "label": "Mark as Sale",
      "default": false
    },
    {
      "type": "header",
      "content": "Category 8"
    },
    {
      "type": "image_picker",
      "id": "category_8_image",
      "label": "Image"
    },
    {
      "type": "text",
      "id": "category_8_title",
      "label": "Title"
    },
    {
      "type": "url",
      "id": "category_8_link",
      "label": "Link"
    },
    {
      "type": "checkbox",
      "id": "category_8_is_sale",
      "label": "Mark as Sale",
      "default": false
    },
    {
      "type": "header",
      "content": "Spacing"
    },
    {
      "type": "range",
      "id": "section_padding_top",
      "label": "Top padding",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "px",
      "default": 40
    },
    {
      "type": "range",
      "id": "section_padding_bottom",
      "label": "Bottom padding",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "px",
      "default": 40
    }
  ],
  "presets": [
    {
      "name": "Shop by categories"
    }
  ]
}
{% endschema %}
```